!function(y,h,v){"use strict";var d=y(document),e=y(window);v.selectors={dependent:".tribe-dependent",active:".tribe-active",dependency:".tribe-dependency",dependencyVerified:".tribe-dependency-verified",fields:"input, select, textarea",advanced_fields:".select2-container",linked:".tribe-dependent-linked"},v.constraintConditions={condition:function(e,n){return h.isArray(n)?-1!==n.indexOf(e):e==n},not_condition:function(e,n){return h.isArray(n)?-1===n.indexOf(e):e!=n},is_not_empty:function(e){return""!=e},is_empty:function(e){return""===e},is_numeric:function(e){return y.isNumeric(e)},is_not_numeric:function(e){return!y.isNumeric(e)},is_checked:function(e,n,t){return!(!t.is(":checkbox")&&!t.is(":radio"))&&t.is(":checked")},is_not_checked:function(e,n,t){return!(!t.is(":checkbox")&&!t.is(":radio"))&&!t.is(":checked")}},v.verify=function(e){var u=y(this),n="#"+u.attr("id"),f=u.val();if(n){if(u.is(":radio")){var t=y("[name='"+u.attr("name")+"']");t.not(v.selectors.linked).on("change",function(){t.trigger("verify.dependency")}).addClass(v.selectors.linked.replace(".",""))}var i=d.find('[data-depends="'+n+'"]').not(".select2-container");0!==i.length&&(i.each(function(e,n){var t=y(n);if(t.is("[data-dependent-parent]")){var i=t.data("dependentParent"),d=t.closest(i);if(0===d.length)return void console.warn("Dependency: `data-dependent-parent` has bad selector",t);t=d.find(n)}var c={condition:!!t.is("[data-condition]")&&t.data("condition"),not_condition:!!t.is("[data-condition-not]")&&t.data("conditionNot"),is_not_empty:t.data("conditionIsNotEmpty")||t.is("[data-condition-is-not-empty]")||t.data("conditionNotEmpty")||t.is("[data-condition-not-empty]"),is_empty:t.data("conditionIsEmpty")||t.is("[data-condition-is-empty]")||t.data("conditionEmpty")||t.is("[data-condition-empty]"),is_numeric:t.data("conditionIsNumeric")||t.is("[data-condition-is-numeric]")||t.data("conditionNumeric")||t.is("[data-condition-numeric]"),is_not_numeric:t.data("conditionIsNotNumeric")||t.is("[data-condition-is-not-numeric]"),is_checked:t.data("conditionIsChecked")||t.is("[data-condition-is-checked]")||t.data("conditionChecked")||t.is("[data-condition-checked]"),is_not_checked:t.data("conditionIsNotChecked")||t.is("[data-condition-is-not-checked]")||t.data("conditionNotChecked")||t.is("[data-condition-not-checked]")},a=v.selectors.active.replace(".",""),o=t.is("[data-dependency-check-disabled]"),s=t.is("[data-dependency-always-visible]"),r=!o&&u.is(":disabled"),l=t.data("condition-relation")||"or";c=h.pick(c,function(e){return!1!==e}),("or"===l?h.reduce(c,function(e,n,t){return e||v.constraintConditions[t](f,n,u)},!1):h.reduce(c,function(e,n,t){return e&&v.constraintConditions[t](f,n,u)},!0))&&!r?(t.data("select2")?(t.data("select2").container.addClass(a),t.data("select2").container.is(":hidden")&&t.data("select2").container.show()):(t.addClass(a),t.is(":hidden")&&t.show()),s&&t.filter(v.selectors.fields).prop("disabled",!1),t.find(v.selectors.fields).prop("disabled",!1),void 0!==y().select2&&t.find(".select2-container").select2("enable",!0)):(t.removeClass(a),t.is(":visible")&&t.hide(),t.data("dependency-dont-disable")||t.find(v.selectors.fields).prop("disabled",!0),void 0!==y().select2&&t.find(".select2-container").select2("enable",!1),t.data("select2")&&t.data("select2").container.removeClass(a),s&&(t.addClass(a).show(),t.filter(v.selectors.fields).prop("disabled",!0),t.data("select2")&&t.data("select2").container.addClass(a).show()));var p=t.find(v.selectors.dependency);0<p.length&&p.trigger("change")}),u.addClass(v.selectors.dependencyVerified.className()))}},v.setup=function(e){var n=y(v.selectors.dependent);n.length&&n.dependency();var t=y(v.selectors.dependency);t.not(v.selectors.dependencyVerified).length&&t.trigger("verify.dependency")},y.fn.dependency=function(){return this.each(function(){var e=y(this),n=e.data("depends"),t=y(n);t.length&&(t.get(0).created||(t.addClass(v.selectors.dependency.replace(".","")).data("dependent",e),t.get(0).created=!0))})},d.on("setup.dependency",v.setup),d.off("change.dependency verify.dependency",v.selectors.dependency),d.on({"verify.dependency":v.verify,"change.dependency":v.verify},v.selectors.dependency),d.ready(v.setup),e.on("load",v.setup)}(jQuery,window.underscore||window._,{});