var tribe_logger_admin=tribe_logger_admin||{},tribe_logger_data=tribe_logger_data||{};!function(n,e){var a=!1,o="",i="",l=!1,t=n("#tribe-log-controls"),d=t.find("select"),g=t.find(".working"),r=n("#tribe-log-viewer"),c=n("a.download_log");function s(e){v(),n.isArray(e.data.entries)&&(r.html(function(e){var t="<table>";for(var r in e){for(var n in t+="<tr>",e[r])t+="<td>"+e[r][n]+"</td>";t+="</tr>"}return t+"</table>"}(e.data.entries)),f())}function f(){var e=c.attr("href"),t=encodeURI(_()),r=e.match(/&log=([a-z0-9\-]+)/i);e=n.isArray(r)&&2===r.length?e.replace(r[0],"&log="+t):e.indexOf("?")?e+"&log="+t:e+"?log="+t,c.attr("href",e)}function u(){v()}function v(){a=!1,d.prop("disabled",!1),g.addClass("hidden")}function _(){return n("#log-selector").find(":selected").attr("name")}function b(){return n("#log-engine").find(":selected").attr("name")}o=_(),i=b(),f(),d.change(function(){var e,t;a||(e=_(),t=b(),e!==o||t!==i?(l=!0,o=e,i=t):l=!1,a=!0,d.prop("disabled",!0),g.removeClass("hidden"),r={action:"tribe_logging_controls",check:tribe_logger_data.check,"log-level":n("#log-level").find(":selected").attr("name"),"log-engine":n("#log-engine").find(":selected").attr("name")},l&&(r["log-view"]=o),n.ajax(ajaxurl,{method:"POST",success:s,error:u,dataType:"json",data:r}));var r})}(jQuery);