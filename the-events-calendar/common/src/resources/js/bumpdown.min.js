!function(d,o){"use strict";d(document).ready(function(){d(".tribe-bumpdown-trigger").bumpdown()}),d.fn.bumpdown=function(){var t=d(document),i={ID:"tribe-bumpdown-",data_trigger:function(t){return'[data-trigger="'+t+'"]'},bumpdown:".tribe-bumpdown",content:".tribe-bumpdown-content",trigger:".tribe-bumpdown-trigger",hover_trigger:".tribe-bumpdown-trigger:not(.tribe-bumpdown-nohover)",close:".tribe-bumpdown-close",permanent:".tribe-bumpdown-permanent",active:".tribe-bumpdown-active"},a={open:function(t){var e=t.data("bumpdown"),n=e.$trigger.data("width-rule");if(!t.is(":visible")){e.$trigger.addClass(i.active.replace(".",""));var r=t.find(i.content);if("string"==typeof n&&"all-triggers"===n){var o=0;d(i.trigger).each(function(){var t=d(this);if(t.data("width-rule")){var e=t.position();e.left>o&&(o=e.left)}}),o&&(o=600<o?o:600,r.css("max-width",o+"px"))}r.prepend('<a class="tribe-bumpdown-close" title="Close"><i class="dashicons dashicons-no"></i></a>'),r.prepend('<span class="tribe-bumpdown-arrow"></span>'),a.arrow(t),t.data("preventClose",!0),t.slideDown("fast",function(){t.data("preventClose",!1)})}},close:function(t){var e=t.data("bumpdown");t.is(":visible")&&!t.data("preventClose")&&(d(this).removeData("is_hoverintent_queued"),t.find(".tribe-bumpdown-close, .tribe-bumpdown-arrow").remove(),t.not(".tribe-bumpdown-trigger").slideUp("fast"),e.$trigger.removeClass(i.active.replace(".","")))},arrow:function(t){var e,n=t.data("bumpdown");e=Math.ceil(n.$trigger.position().left-("block"===n.type?n.$parent.offset().left:0)),n.$bumpdown.find(".tribe-bumpdown-arrow").css("left",e)}};return d(window).on({"resize.bumpdown":function(){t.find(i.active).each(function(){a.arrow(d(this))})}}),t.hoverIntent({over:function(){var t=d(this).data("bumpdown");t.$trigger.data("is_hoverintent_queued",!1),t.$bumpdown.trigger("open.bumpdown")},out:function(){},selector:i.hover_trigger,interval:200}).on({mouseenter:function(){void 0===d(this).data("is_hoverintent_queued")&&d(this).data("is_hoverintent_queued",!0)},click:function(t){var e=d(this).data("bumpdown");if(t.preventDefault(),t.stopPropagation(),e.$bumpdown.is(":visible")){if(e.$trigger.data("is_hoverintent_queued"))return e.$trigger.data("is_hoverintent_queued",!1);e.$bumpdown.trigger("close.bumpdown")}else e.$bumpdown.trigger("open.bumpdown")},"open.bumpdown":function(){a.open(d(this))},"close.bumpdown":function(){a.close(d(this))}},i.trigger).on({click:function(t){var e=d(this).parents(i.bumpdown).first().data("bumpdown");t.preventDefault(),t.stopPropagation(),void 0!==e&&void 0!==e.$bumpdown&&e.$bumpdown.trigger("close.bumpdown")}},i.close).on("click",function(t){var e=d(t.target);e.is(i.bumpdown)||0!==e.parents(i.bumpdown).length||d(i.trigger).not(i.permanent).trigger("close.bumpdown")}).on({"open.bumpdown":function(){a.open(d(this))},"close.bumpdown":function(){a.close(d(this))}},i.bumpdown),this.each(function(){var t={$trigger:d(this),$parent:null,$bumpdown:null,ID:null,html:null,type:"block",is_permanent:!1};if(t.ID=t.$trigger.attr("id"),t.ID||(t.ID=o.uniqueId(i.ID),t.$trigger.attr("id",t.ID)),t.html=t.$trigger.attr("data-bumpdown"),t.html='<div class="tribe-bumpdown-content">'+t.html+"</div>",t.class=t.$trigger.attr("data-bumpdown-class"),t.is_permanent=t.$trigger.is(i.permanent),t.$parent=t.$trigger.parents().filter(function(){return-1<d.inArray(d(this).css("display"),["block","table","table-cell","table-row"])}).first(),t.html)if(t.type=t.$parent.is("td, tr, td, table")?"table":"block","table"===t.type){t.$bumpdown=d("<td>").attr({colspan:2}).addClass("tribe-bumpdown-cell").html(t.html);var e=t.class?"tribe-bumpdown-row "+t.class:"tribe-bumpdown-row",n=d("<tr>").append(t.$bumpdown).addClass(e);t.$parent=t.$trigger.parents("tr").first(),t.$parent.after(n)}else t.$bumpdown=d("<div>").addClass("tribe-bumpdown-block").html(t.html),t.$trigger.after(t.$bumpdown);else t.$bumpdown=d(i.data_trigger(t.ID)),t.type="block";if(t.$trigger.data("bumpdown",t).addClass(i.trigger.replace(".","")),t.$bumpdown.data("bumpdown",t).addClass(i.bumpdown.replace(".","")),t.$trigger.data("depends")){var r=t.$trigger.data("depends");d(document).on("change",r,function(){a.close(t.$bumpdown)})}})}}(jQuery,window.underscore||window._);