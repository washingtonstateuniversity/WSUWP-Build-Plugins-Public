var tribeDateFormat=function(){var v=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,h=/[^-+\dA-Z]/g,b=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(e,t,n){var a=tribeDateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),"string"==typeof e&&(e=e.replace(/-/g,"/")),e=e?new Date(e):new Date,!isNaN(e)){"UTC:"==(t=String(a.masks[t]||t||a.masks.default)).slice(0,4)&&(t=t.slice(4),n=!0);var i=n?"getUTC":"get",d=e[i+"Date"](),r=e[i+"Day"](),o=e[i+"Month"](),s=e[i+"FullYear"](),l=e[i+"Hours"](),c=e[i+"Minutes"](),m=e[i+"Seconds"](),p=e[i+"Milliseconds"](),y=n?0:e.getTimezoneOffset(),u={d:d,dd:b(d),ddd:a.i18n.dayNames[r],dddd:a.i18n.dayNames[r+7],m:o+1,mm:b(o+1),mmm:a.i18n.monthNames[o],mmmm:a.i18n.monthNames[o+12],yy:String(s).slice(2),yyyy:s,h:l%12||12,hh:b(l%12||12),H:l,HH:b(l),M:c,MM:b(c),s:m,ss:b(m),l:b(p,3),L:b(99<p?Math.round(p/10):p),t:l<12?"a":"p",tt:l<12?"am":"pm",T:l<12?"A":"P",TT:l<12?"AM":"PM",Z:n?"UTC":(String(e).match(f)||[""]).pop().replace(h,""),o:(0<y?"-":"+")+b(100*Math.floor(Math.abs(y)/60)+Math.abs(y)%60,4),S:["th","st","nd","rd"][3<d%10?0:(d%100-d%10!=10)*d%10]};return t.replace(v,function(e){return e in u?u[e]:e.slice(1,e.length-1)})}}}();tribeDateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",tribeQuery:"yyyy-mm-dd",tribeMonthQuery:"yyyy-mm",0:"yyyy-mm-dd",1:"m/d/yyyy",2:"mm/dd/yyyy",3:"d/m/yyyy",4:"dd/mm/yyyy",5:"m-d-yyyy",6:"mm-dd-yyyy",7:"d-m-yyyy",8:"dd-mm-yyyy",9:"yyyy.mm.dd",10:"mm.dd.yyyy",11:"dd.mm.yyyy",m0:"yyyy-mm",m1:"m/yyyy",m2:"mm/yyyy",m3:"m/yyyy",m4:"mm/yyyy",m5:"m-yyyy",m6:"mm-yyyy",m7:"m-yyyy",m8:"mm-yyyy"},tribeDateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return tribeDateFormat(this,e,t)};var tribe_datepicker_opts={};jQuery(document).ready(function(m){m(".bumpdown-trigger").bumpdown();var e=m("[data-datepicker_format]"),t=(m(".tribe-field-dropdown_select2 select"),m(document.getElementById("view-calendar-link-div")).html()),n=(m('select[name="tribeEventsTemplate"]'),m(document.getElementById("tribe-event-datepickers"))),a=m("body").is(".tribe_community_edit"),i=0;function d(){var e=m(window).width();return e<800?1:e<=1100?2:3}m('[data-wp-lists="list:tribe_events_cat"]').each(function(){var e=m(this),t=e.find(":checkbox:checked").first();if(t.length){var n=e.find(":checkbox").position().top,a=t.position().top;e.closest(".tabs-panel").scrollTop(a-n+5)}}),m(t).insertAfter(".edit-php.post-type-tribe_events #wpbody-content .wrap h2:eq(0) a");var r=function(i){var d=m(document.getElementById("tmpl-tribe-select-"+i)).length?wp.template("tribe-select-"+i):null,o=m(document.getElementById("tmpl-tribe-create-"+i)).length?wp.template("tribe-create-"+i):null,r=m(document.getElementById("event_"+i)),e=r.find(".saved-linked-post");function s(e,t,n){if(void 0!==window["tribe_sticky_"+e+"_fields"]&&m.isArray(window["tribe_sticky_"+e+"_fields"])){var a=m(n),i=a.filter("tr.linked-post."+t);if(0!==i.length){var d=window["tribe_sticky_"+e+"_fields"].shift(),r=!1;if("object"==typeof d)for(var o in d){var s=a.find('input[name="'+t+"["+o+'][]"]');s.length&&!_.isEmpty(d[o])&&(s.val(d[o]),r=!0)}r&&i.show()}}}r.on("click",".tribe-add-post",function(e){e.preventDefault();var t=m({}),n=m({});if(d&&(t=m(d({}))),t.find(".nosaved").length){var a=t.find("label");a.text(a.data("l10n-create-"+i)),t.find(".nosaved").remove()}o&&(n=m(o({}))),r.find("tfoot").before(n),n.prepend(t),1<r.find("tbody").length?r.find(".move-linked-post-group").show():r.find(".move-linked-post-group").hide(),n.find(".tribe-dropdown").tribe_dropdowns().trigger("change")}),r.on("change",".linked-post-dropdown",l),e.each(function(){var e,t=m(this),n=t.closest("tbody");e=o?m(o({})).find("tr"):n.find("tr").slice(2);var a=t.find(".linked-post-dropdown");if(a.length){var i=a.val();0!==parseInt(i,10)&&e.not(".remain-visible").hide()}else if(t.find(".nosaved").length){var d=t.find("label");d.text(d.data("l10n-create-"+r)),t.find(".nosaved").remove()}for(var r in tribe_events_linked_posts.post_types)tribe_events_linked_posts.post_types.hasOwnProperty(r)&&s(r,tribe_events_linked_posts.post_types[r],e);e.find(".tribe-dropdown").tribe_dropdowns().trigger("change"),n.append(e)}),r.on("click",".tribe-delete-this",function(e){e.preventDefault();var t=m(this).closest("tbody");t.parents(".tribe-section").removeClass("tribe-is-creating-linked-post"),t.fadeOut(500,function(){m(this).remove()})});var t="> tbody";m("body").hasClass("wp-admin")||(t="table "+t),r.sortable({items:t,handle:".move-linked-post-group",containment:"parent",axis:"y",delay:100}),1<r.find("tbody").length?r.find(".move-linked-post-group").show():r.find(".move-linked-post-group").hide()},l=function(e){var t=m(this),n=t.select2("data"),a=t.closest("tbody"),i=a.find(".edit-linked-post-link a"),d=void 0===e.added?{}:e.added,r="";null!==n&&"string"==typeof n.edit&&(r=n.edit),_.isEmpty(r)&&i.hide(),void 0!==d.new&&d.new?(a.find(".linked-post-name").val(d.id).parents(".linked-post").eq(0).attr("data-hidden",!0),t.val(""),a.find(".linked-post").not("[data-hidden]").show().find(".tribe-dropdown").trigger("change"),a.parents(".tribe-section").addClass("tribe-is-creating-linked-post")):(a.find(".linked-post").hide().find("input").val(""),a.parents(".tribe-section").removeClass("tribe-is-creating-linked-post"),_.isEmpty(r)||i.attr("href",r).show())};if(m(".hide-if-js").hide(),void 0!==tribe_l10n_datatables.datepicker){var o="yy-mm-dd";e.length&&1<=e.attr("data-datepicker_format").length&&(o=["yy-mm-dd","m/d/yy","mm/dd/yy","d/m/yy","dd/mm/yy","m-d-yy","mm-dd-yy","d-m-yy","dd-mm-yy","yy.mm.dd","mm.dd.yy","dd.mm.yy"][i=e.attr("data-datepicker_format")]);n.length&&n.data("startofweek");var p=m(document.getElementById("EventStartDate")),y=m(document.getElementById("EventEndDate")),s=m(document.getElementById("tribe_events_event_details"));tribe_datepicker_opts={dateFormat:o,showAnim:"fadeIn",changeMonth:!0,changeYear:!0,numberOfMonths:d(),showButtonPanel:!1,beforeShow:function(e,t){t.input.datepicker("option","numberOfMonths",d()),t.input.data("prevDate",t.input.datepicker("getDate")),void 0!==t.input.data("datepicker-min-date")&&t.input.datepicker("option","minDate",t.input.data("datepicker-min-date")),void 0!==t.input.data("datepicker-max-date")&&t.input.datepicker("option","maxDate",t.input.data("datepicker-max-date")),$dpDiv=m(t.dpDiv),$dpDiv.addClass("tribe-ui-datepicker"),s.trigger("tribe.ui-datepicker-div-beforeshow",[t]),$dpDiv.attrchange({trackValues:!0,callback:function(e){(0<=e.newValue.indexOf("display: none")||0<=e.newValue.indexOf("display:none"))&&($dpDiv.removeClass("tribe-ui-datepicker"),s.trigger("tribe.ui-datepicker-div-closed",[t]))}})},onSelect:function(e,t){var n,a,i,d,r=m(this).data("datepicker"),o=m.datepicker.parseDate(r.settings.dateFormat||m.datepicker._defaults.dateFormat,e,r.settings);if("EventStartDate"===this.id){var s=m(document.getElementById("EventStartDate")).data("prevDate"),l=null==s?0:(n=s,a=y.datepicker("getDate"),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),d=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),Math.floor((d-i)/864e5)),c=new Date(o.setDate(o.getDate()+l));y.datepicker("option","minDate",p.datepicker("getDate")).datepicker("setDate",c).datepicker_format}m(this).change(),m(this).blur()}},m.extend(tribe_datepicker_opts,tribe_l10n_datatables.datepicker);m(".tribe-datepicker").datepicker(tribe_datepicker_opts);var c,u=m('select[name="EventStartMonth"], select[name="EventEndMonth"]'),v=m('select[name="EventStartMonth"]'),f=m('select[name="EventEndMonth"]');if(a){var h={start:n.find("#EventStartDate"),end:n.next("tr").find("#EventEndDate")};m.each(h,function(e,t){var n=m(t);""!==n.val()&&n.val(tribeDateFormat(n.val(),i))})}var b=[29,31,28,31,30,31,30,31,31,30,31,30,31],g=[m(document.getElementById("28StartDays")),m(document.getElementById("29StartDays")),m(document.getElementById("30StartDays")),m(document.getElementById("31StartDays"))],k=[m(document.getElementById("28EndDays")),m(document.getElementById("29EndDays")),m(document.getElementById("30EndDays")),m(document.getElementById("31EndDays"))];for(var w in u.change(function(){var e=m(this),t=e.attr("name");t="EventStartMonth"==t?"Start":"End";var n=e.attr("value");"0"==n.charAt(0)&&(n=n.replace("0",""));var a=m('select[name="Event'+t+'Year"]').attr("value")%4;2==n&&0==a&&(n=0);var i=m('select[name="Event'+t+'Day"]');m(".event"+t+"DateField").remove(),"Start"==t?((c=g[b[n]-28]).val(i.val()),v.after(c)):((c=k[b[n]-28]).val(i.val()),f.after(c))}),u.change(),m('select[name="EventStartYear"]').change(function(){v.change()}),m('select[name="EventEndYear"]').change(function(){f.change()}),tribe_events_linked_posts.post_types)tribe_events_linked_posts.post_types.hasOwnProperty(w)&&r(w)}m("body").on("change","#EventCountry",function(){var e=m(this).parents("div.eventForm").eq(0),t=e.find("#s2id_StateProvinceSelect"),n=e.find("#StateProvinceSelect"),a=e.find("#StateProvinceText"),i=m(this).val();"US"==i||"United States"==i?(a.hide(),n.hide(),t.show()):(a.show(),n.hide(),t.hide())}).find("#EventCountry").trigger("change");var D={$container:m(document.getElementById("overwrite_coordinates"))};D.$lat=D.$container.find("#VenueLatitude"),D.$lng=D.$container.find("#VenueLongitude"),D.$fields=m("").add(D.$lat).add(D.$lng),D.$toggle=D.$container.find("#VenueOverwriteCoords").on("change",function(e){D.$toggle.is(":checked")?D.$fields.prop("disabled",!1).removeClass("hidden"):D.$fields.prop("disabled",!0).addClass("hidden")}),D.$toggle.trigger("change"),m("#EventInfo input, #EventInfo select").change(function(){m(".rec-error").hide()}),m('.wp-admin.events-cal #post #publishing-action input[type="submit"]').click(function(){m(this).data("clicked",!0)}),m("body").hasClass("post-type-tribe_venue")&&m("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_venue']").parent().addClass("current"),m("body").hasClass("post-type-tribe_organizer")&&m("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_organizer']").parent().addClass("current");var E=m(document.getElementById("tribe-field-tribeEnableViews"));if(E.length){var S=m('select[name="viewOption"]'),M=m('select[name="mobile_default_view"]'),C=E.find("input:checkbox"),I=m("#tribe-field-tribeEnableViews .tribe-field-wrap p.description"),$={};S.find("option").each(function(){var e=m(this);$[e.attr("value")]=e.text()}),M.find("option").each(function(){var e=m(this);$[e.attr("value")]=e.text()}),E.on("change","input:checkbox",function(){var e=m(this);m('[name="tribeEnableViews[]"]:checked').length<1?(e.attr("checked",!0),I.css("color","red")):I.removeAttr("style"),function(e){var t=S.find("option:selected").first().val(),n=M.find("option:selected").first().val();S.find("option").remove(),M.find("option").remove(),C.each(function(){var e=m(this);if(e.is(":checked")){var t=e.val(),n=t.substr(0,1).toUpperCase()+t.substr(1);S.append('<option value="'+t+'">'+n+"</option>"),M.append('<option value="'+t+'">'+n+"</option>")}});var a=S.find("option[value='"+t+"']"),i=M.find("option[value='"+n+"']");if(a.val()==e.val())a.attr("selected","selected");else{var d=E.find("checkbox:checked").first().val();S.find("option").find("option[value='"+d+"']").attr("selected","selected")}i.val()==e.val()?i.attr("selected","selected"):(d=E.find("checkbox:checked").first().val(),M.find("option").find("option[value='"+d+"']").attr("selected","selected"));S.select2("destroy").select2({width:"auto"}),M.select2("destroy").select2({width:"auto"})}(e)})}m("#tribe-community-events.form form").on("submit",function(){var e={start:n.find("#EventStartDate"),end:n.next("tr").find("#EventEndDate")};e.start.val(tribeDateFormat(e.start.datepicker("getDate"),"tribeQuery")),e.end.val(tribeDateFormat(e.end.datepicker("getDate"),"tribeQuery")),n.parent().find(".tribe-no-end-date-update").each(function(){$el=m(this),$el.is(":visible")&&$el.val(tribeDateFormat($el.datepicker("getDate"),"tribeQuery"))})})});