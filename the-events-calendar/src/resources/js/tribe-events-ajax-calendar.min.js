!function(e,t,a,r,i,n,s,l,o,d){a(t).ready(function(){function _(e){var t=a('.tribe-mobile-day[data-day="'+e+'"]'),r=a('.tribe-events-calendar td[data-day="'+e+'"]'),i=r.find(".tribe-events-viewmore"),n=r.find(".type-tribe_events");n.length&&(n.each(function(){var e=a(this);if(e.tribe_has_attr("data-tribejson")){var r=e.data("tribejson");if("string"==typeof r)try{r=JSON.parse(r)}catch(i){r={}}r&&"eventId"in r&&t.append(tribe_tmpl("tribe_tmpl_month_mobile",r))}}),i.length&&t.append(i.clone()))}function u(e){var a=e.data("tribejson");a.date=e.attr("data-day");var r=e.parents(".tribe-events-calendar"),i=r.next(t.getElementById("tribe-mobile-container")),n=i.find(".tribe-mobile-day"),s=r.find(".mobile-trigger"),l='[data-day="'+a.date+'"]',o=n.filter(l);a.has_events=e.hasClass("tribe-events-has-events"),s.removeClass("mobile-active").filter(l).addClass("mobile-active"),n.hide(),o.length?o.show():(i.append(tribe_tmpl("tribe_tmpl_month_mobile_day_header",a)),_(a.date))}function p(){var e=y.find(".mobile-active"),r=y.find(".mobile-trigger"),i=y.find(t.getElementById("tribe-events-content")).find(".tribe-events-calendar");if(!e.length)var e=y.find(".tribe-events-present");if(a(t.getElementById("tribe-mobile-container")).length||a('<div id="tribe-mobile-container" />').insertAfter(i),e.length&&e.is(".tribe-events-thismonth"))u(e);else{var n=r.filter(".tribe-events-thismonth").first();u(n)}}function b(){y.find(".tribe-events-calendar th").each(function(){var e=a(this),t=e.attr("data-day-abbr"),r=e.attr("title");f.is(".tribe-mobile")?e.text(t):e.text(r)})}function c(e){f.is(".tribe-mobile")?(b(),p()):e&&b()}function m(e){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),s.ajax_running)return;x.val().length?"0"!==s.datepicker_format?s.date=tribeDateFormat(x.bootstrapDatepicker("getDate"),"tribeMonthQuery"):s.date=x.val():j||(s.date=r.cur_date.slice(0,-3)),s.filter_cats?r.cur_url=a("#tribe-events-header").data("baseurl")+s.date+"/":r.default_permalinks?r.cur_url=k:r.cur_url=k+s.date+"/",s.popping=!1,n.pre_ajax(function(){v()})}}function v(){n.invalid_date(s.date)||(a(".tribe-events-calendar").tribe_spin(),s.pushcount=0,s.ajax_running=!0,s.popping||(s.params={action:"tribe_calendar",eventDate:s.date,featured:n.is_featured()},s.url_params={},s.category&&(s.params.tribe_event_category=s.category,s.url_params.tribe_events_cat=s.category),r.default_permalinks&&(y.is(".tribe-events-shortcode")||(s.url_params.hasOwnProperty("post_type")||(s.url_params.post_type=o.events_post_type),s.url_params.hasOwnProperty("eventDisplay")||(s.url_params.eventDisplay=s.view))),a(i).trigger("tribe_ev_serializeBar"),s.params=a.param(s.params),s.url_params=a.param(s.url_params),a(i).trigger("tribe_ev_collectParams"),s.pushcount>0||s.filters||r.default_permalinks||s.category?(s.do_string=!0,s.pushstate=!1):(s.do_string=!1,s.pushstate=!0)),l.pushstate&&!s.filter_cats?(d&&debug.time("Month View Ajax Timer"),a(i).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_monthView_AjaxStart"),a.post(TribeCalendar.ajaxurl,s.params,function(e){if(s.initial_load=!1,n.enable_inputs("#tribe_events_filters_form","input, select"),e.success){s.ajax_running=!1,r.ajax_response={total_count:"",view:e.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()},d&&0===e.html&&debug.warn("Month view ajax had an error in the query and returned 0.");var l="";l=a.isFunction(a.fn.parseHTML)?a.parseHTML(e.html):e.html,r.cur_url=n.get_base_url(),a("#tribe-events-content").replaceWith(l),c(!0),s.page_title=a("#tribe-events-header").data("title"),s.view_title=a("#tribe-events-header").data("viewtitle"),t.title=s.page_title,a(".tribe-events-page-title").html(s.view_title),(a("#tribe-events.tribe-events-shortcode").length||s.do_string)&&(r.default_permalinks?r.cur_url=r.cur_url+"&"+s.url_params:(-1!==r.cur_url.indexOf("?")&&(r.cur_url=r.cur_url.split("?")[0]),r.cur_url=r.cur_url+"?"+s.url_params)),s.do_string&&history.pushState({tribe_date:s.date,tribe_params:s.params},s.page_title,r.cur_url),s.pushstate&&history.pushState({tribe_date:s.date,tribe_params:s.params},s.page_title,r.cur_url),a(i).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_monthView_ajaxSuccess"),a(i).trigger("ajax-success.tribe").trigger("tribe_ev_monthView_ajaxSuccess"),d&&debug.timeEnd("Month View Ajax Timer")}})):s.url_params.length?e.location=r.cur_url+"?"+s.url_params:e.location=r.cur_url)}var f=a("body"),g=a('[class^="tribe-events-nav-"] a'),h=n.get_url_param("tribe-bar-date"),y=a(t.getElementById("tribe-events")),x=a(t.getElementById("tribe-bar-date")),j=!1,k="/";"undefined"!=typeof o.events_base?k=a(t.getElementById("tribe-events-header")).data("baseurl"):g.length&&(k=g.first().attr("href").slice(0,-8)),r.default_permalinks&&(k=k.split("?")[0]),a(".tribe-events-calendar").length&&a(t.getElementById("tribe-events-bar")).length&&h&&h.length>7&&(a(t.getElementById("tribe-bar-date-day")).val(h.slice(-3)),x.val(h.substring(0,7)));var w="yyyy-mm";if("0"!==s.datepicker_format){var D=parseInt(s.datepicker_format),E="m"+s.datepicker_format.toString();w=r.datepicker_formats.month[D],h&&(h.length<=7&&(h+="-01"),x.val(tribeDateFormat(h,E)))}if(r.datepicker_opts={format:w,minViewMode:"months",autoclose:!0},x.bootstrapDatepicker(r.datepicker_opts).on("changeDate",function(e){s.mdate=e.date;var i=e.date.getFullYear(),o=("0"+(e.date.getMonth()+1)).slice(-2);if(j=!0,s.date=i+"-"+o,l.no_bar()||l.live_ajax()&&l.pushstate){if(s.ajax_running||s.updating_picker)return;s.filter_cats?r.cur_url=a(t.getElementById("tribe-events-header")).data("baseurl")+s.date+"/":r.default_permalinks?r.cur_url=k:r.cur_url=k+s.date+"/",s.popping=!1,n.pre_ajax(function(){v()})}}),c(!0),a(i).on("tribe_ev_resizeComplete",function(){c(!0)}),l.pushstate&&!l.map_view()){var I="action=tribe_calendar&eventDate="+a("#tribe-events-header").data("date");r.params.length&&(I=I+"&"+r.params),s.category&&(I=I+"&tribe_event_category="+s.category),n.is_featured()&&(I+="&featured=1"),history.replaceState({tribe_params:I},s.page_title,location.href),a(e).on("popstate",function(e){var t=e.originalEvent.state;t&&(s.do_string=!1,s.pushstate=!1,s.popping=!0,s.params=t.tribe_params,n.pre_ajax(function(){v()}),n.set_form(s.params))})}a(t.getElementById("tribe-events")).on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(e){if(e.preventDefault(),!s.ajax_running){var t,i=a(this).find("a");s.date=i.data("month"),s.mdate=s.date+"-01","0"!==s.datepicker_format?n.update_picker(tribeDateFormat(s.mdate,E)):n.update_picker(s.date),t=s.filter_cats?a("#tribe-events-header").data("baseurl"):i.attr("href"),r.default_permalinks&&(t=r.cur_url.split("?")[0]),y.is(".tribe-events-shortcode")&&r.default_permalinks&&(t=n.get_base_url()),n.update_base_url(t),s.popping=!1,n.pre_ajax(function(){v()})}}).on("click","td.tribe-events-thismonth a",function(e){e.stopPropagation()}).on("click",'[id*="tribe-events-daynum-"] a',function(e){if(f.is(".tribe-mobile")){e.preventDefault();var t=a(this).closest(".mobile-trigger");u(t)}}).on("click",".mobile-trigger",function(e){f.is(".tribe-mobile")&&(e.preventDefault(),e.stopPropagation(),u(a(this)))}),n.snap("#tribe-bar-form","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),a("form#tribe-bar-form").on("submit",function(e){m(e)}),a(i).on("tribe_ev_runAjax",function(){v()}),a(i).on("tribe_ev_updatingRecurrence",function(){s.date=a("#tribe-events-header").data("date"),s.filter_cats?r.cur_url=a("#tribe-events-header").data("baseurl")+s.date+"/":r.default_permalinks?r.cur_url=k:r.cur_url=k+s.date+"/",s.popping=!1}),d&&debug.info("TEC Debug: tribe-events-ajax-calendar.js successfully loaded, Tribe Events Init finished"),d&&debug.timeEnd("Tribe JS Init Timer")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);