!function(m,v,g,f,h,y,x,j,k,w){g(v).ready(function(){var r=g("body"),e=g('[class^="tribe-events-nav-"] a'),t=y.get_url_param("tribe-bar-date"),i=g(v.getElementById("tribe-events")),a=g(v.getElementById("tribe-bar-date")),n=!1;if(!(i.length<1||r.hasClass("single-tribe_events"))){var s="/";void 0!==k.events_base?s=g(v.getElementById("tribe-events-header")).data("baseurl"):e.length&&(s=e.first().attr("href").slice(0,-8)),f.default_permalinks&&(s=s.split("?")[0]),g(".tribe-events-calendar").length&&g(v.getElementById("tribe-events-bar")).length&&t&&7<t.length&&(g(v.getElementById("tribe-bar-date-day")).val(t.slice(-3)),a.val(t.substring(0,7)));var l="yyyy-mm";if("0"!==x.datepicker_format){var o=parseInt(x.datepicker_format),_="m"+x.datepicker_format.toString();l=f.datepicker_formats.month[o],t&&(t.length<=7&&(t+="-01"),a.val(tribeDateFormat(t,_)))}if(f.datepicker_opts={format:l,minViewMode:"months",autoclose:!0},tribe_ev.fn.ensure_datepicker_i18n(),a.bootstrapDatepicker(f.datepicker_opts).on("changeDate",function(e){x.mdate=e.date;var t=e.date.getFullYear(),a=("0"+(e.date.getMonth()+1)).slice(-2);if(n=!0,x.date=t+"-"+a,j.no_bar()||j.live_ajax()&&j.pushstate){if(x.ajax_running||x.updating_picker)return;x.filter_cats?f.cur_url=g(v.getElementById("tribe-events-header")).data("baseurl")+x.date+"/":f.default_permalinks?f.cur_url=s:f.cur_url=s+x.date+"/",x.popping=!1,y.pre_ajax(function(){c()})}}),b(!0),g(h).on("tribe_ev_resizeComplete",function(){b(!0)}),j.pushstate&&!j.map_view()){var d="action=tribe_calendar&eventDate="+g("#tribe-events-header").data("date");f.params.length&&(d=d+"&"+f.params),x.category&&(d=d+"&tribe_event_category="+x.category),y.is_featured()&&(d+="&featured=1"),history.replaceState({tribe_params:d},x.page_title,location.href),g(m).on("popstate",function(e){var t=e.originalEvent.state;t&&(x.do_string=!1,x.pushstate=!1,x.popping=!0,x.params=t.tribe_params,y.pre_ajax(function(){c()}),y.set_form(x.params))})}g(v.getElementById("tribe-events")).on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(e){if(e.preventDefault(),!x.ajax_running){var t,a=g(this).find("a");x.date=a.data("month"),x.mdate=x.date+"-01","0"!==x.datepicker_format?y.update_picker(tribeDateFormat(x.mdate,_)):y.update_picker(x.date),t=x.filter_cats?g("#tribe-events-header").data("baseurl"):a.attr("href"),f.default_permalinks&&(t=f.cur_url.split("?")[0]),i.is(".tribe-events-shortcode")&&f.default_permalinks&&(t=y.get_base_url()),y.update_base_url(t),x.popping=!1,y.pre_ajax(function(){c()})}}).on("click","td.tribe-events-thismonth a",function(e){e.stopPropagation()}).on("click",'[id*="tribe-events-daynum-"] a',function(e){r.is(".tribe-mobile")&&(e.preventDefault(),u(g(this).closest(".mobile-trigger")))}).on("click",".mobile-trigger",function(e){r.is(".tribe-mobile")&&(e.preventDefault(),e.stopPropagation(),u(g(this)))}),y.snap("#tribe-bar-form","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),g("form#tribe-bar-form").on("submit",function(e){!function(e){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),x.ajax_running)return;a.length?"0"!==x.datepicker_format?x.date=tribeDateFormat(a.bootstrapDatepicker("getDate"),"tribeMonthQuery"):x.date=a.val():n||(x.date=f.cur_date.slice(0,-3)),x.filter_cats?f.cur_url=g("#tribe-events-header").data("baseurl")+x.date+"/":f.default_permalinks?f.cur_url=s:f.cur_url=s+x.date+"/",x.popping=!1,y.pre_ajax(function(){c()})}}(e)}),g(h).on("tribe_ev_runAjax",function(){c()}),g(h).on("tribe_ev_updatingRecurrence",function(){x.date=g("#tribe-events-header").data("date"),x.filter_cats?f.cur_url=g("#tribe-events-header").data("baseurl")+x.date+"/":f.default_permalinks?f.cur_url=s:f.cur_url=s+x.date+"/",x.popping=!1}),w&&tec_debug.info("TEC Debug: tribe-events-ajax-calendar.js successfully loaded, Tribe Events Init finished"),w&&tec_debug.timeEnd("Tribe JS Init Timer")}function u(e){var t=e.data("tribejson");if(void 0!==e.attr("data-day")){t.date=e.attr("data-day");var a,r,i,n,s,l=e.parents(".tribe-events-calendar"),o=l.next(v.getElementById("tribe-mobile-container")),_=o.find(".tribe-mobile-day"),d=l.find(".mobile-trigger"),u='[data-day="'+t.date+'"]',p=_.filter(u);t.has_events=e.hasClass("tribe-events-has-events"),d.removeClass("mobile-active").filter(u).addClass("mobile-active"),_.hide(),p.length?p.show():(o.append(tribe_tmpl("tribe_tmpl_month_mobile_day_header",t)),a=t.date,r=g('.tribe-mobile-day[data-day="'+a+'"]'),i=g('.tribe-events-calendar td[data-day="'+a+'"]'),n=i.find(".tribe-events-viewmore"),(s=i.find(".type-tribe_events")).length&&(s.each(function(){var e=g(this);if(e.tribe_has_attr("data-tribejson")){var t=e.data("tribejson");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}t&&"eventId"in t&&r.append(tribe_tmpl("tribe_tmpl_month_mobile",t))}}),n.length&&r.append(n.clone())))}}function p(){i.find(".tribe-events-calendar th").each(function(){var e=g(this),t=e.attr("data-day-abbr"),a=e.attr("title");r.is(".tribe-mobile")?e.text(t):e.text(a)})}function b(e){r.is(".tribe-mobile")?(p(),function(){var e=i.find(".mobile-active"),t=i.find(".mobile-trigger"),a=i.find(v.getElementById("tribe-events-content")).find(".tribe-events-calendar");e.length||(e=i.find(".tribe-events-present"));g(v.getElementById("tribe-mobile-container")).length||g('<div id="tribe-mobile-container" />').insertAfter(a),e.length&&e.is(".tribe-events-thismonth")?u(e):u(t.filter(".tribe-events-thismonth").first())}()):e&&p()}function c(){y.invalid_date(x.date)||(g(".tribe-events-calendar").tribe_spin(),x.pushcount=0,x.ajax_running=!0,x.popping||(x.params={action:"tribe_calendar",eventDate:x.date,featured:y.is_featured()},x.url_params={},x.category&&(x.params.tribe_event_category=x.category,x.url_params.tribe_events_cat=x.category),f.default_permalinks&&(i.is(".tribe-events-shortcode")||(x.url_params.hasOwnProperty("post_type")||(x.url_params.post_type=k.events_post_type),x.url_params.hasOwnProperty("eventDisplay")||(x.url_params.eventDisplay=x.view))),g(h).trigger("tribe_ev_serializeBar"),x.params=g.param(x.params),x.url_params=g.param(x.url_params),g(h).trigger("tribe_ev_collectParams"),0<x.pushcount||x.filters||f.default_permalinks||x.category?(x.do_string=!0,x.pushstate=!1):(x.do_string=!1,x.pushstate=!0)),j.pushstate&&!x.filter_cats?(w&&tec_debug.time("Month View Ajax Timer"),g(h).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_monthView_AjaxStart"),g.post(TribeCalendar.ajaxurl,x.params,function(e){if(x.initial_load=!1,y.enable_inputs("#tribe_events_filters_form","input, select"),e.success){x.ajax_running=!1,f.ajax_response={total_count:"",view:e.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()},w&&0===e.html&&tec_debug.warn("Month view ajax had an error in the query and returned 0.");var t="";t=g.isFunction(g.fn.parseHTML)?g.parseHTML(e.html):e.html,f.cur_url=y.get_base_url(),g("#tribe-events-content").replaceWith(t),b(!0),x.page_title=g("#tribe-events-header").data("title"),x.view_title=g("#tribe-events-header").data("viewtitle"),v.title=x.page_title,g(".tribe-events-page-title").html(x.view_title),(g("#tribe-events.tribe-events-shortcode").length||x.do_string)&&(f.default_permalinks?f.cur_url=f.cur_url+"&"+x.url_params:(-1!==f.cur_url.indexOf("?")&&(f.cur_url=f.cur_url.split("?")[0]),f.cur_url=f.cur_url+"?"+x.url_params)),x.do_string&&history.pushState({tribe_date:x.date,tribe_params:x.params},x.page_title,f.cur_url),x.pushstate&&history.pushState({tribe_date:x.date,tribe_params:x.params},x.page_title,f.cur_url),g(h).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_monthView_ajaxSuccess"),g(h).trigger("ajax-success.tribe").trigger("tribe_ev_monthView_ajaxSuccess"),w&&tec_debug.timeEnd("Month View Ajax Timer")}})):x.url_params.length?m.location=f.cur_url+"?"+x.url_params:m.location=f.cur_url)}})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);