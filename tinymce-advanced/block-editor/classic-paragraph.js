!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=11)}([function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,o){var r=o(7);e.exports=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){r(e,t,o[t])})}return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}},function(e,t,o){var r=o(8),n=o(0);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?n(e):t}},function(e,t){function o(t){return e.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(t)}e.exports=o},function(e,t,o){var r=o(9);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?e.exports=r=function(e){return o(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)},r(t)}e.exports=r},function(e,t){function o(t,r){return e.exports=o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(t,r)}e.exports=o},,function(e,t,o){"use strict";o.r(t);var r=o(1),n=o.n(r),c=o(2),i=o.n(c),a=o(3),l=o.n(a),u=o(4),s=o.n(u),d=o(5),p=o.n(d),f=o(0),m=o.n(f),b=o(6),y=o.n(b),v=window.wp,h=v.element,g=h.Component,k=h.createElement,w=v.keycodes,x=w.BACKSPACE,S=w.DELETE,O=w.F10,_=window.tadvBlockRegister;var P=function(e){function t(e){var o;return i()(this,t),(o=s()(this,p()(t).call(this,e))).initialize=o.initialize.bind(m()(o)),o.onSetup=o.onSetup.bind(m()(o)),o.focus=o.focus.bind(m()(o)),o}return y()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=window.wpEditorL10n.tinymce,t=e.baseURL,o=e.suffix;window.tinymce.EditorManager.overrideDefaults({base_url:t,suffix:o}),"complete"===document.readyState?this.initialize():window.addEventListener("DOMContentLoaded",this.initialize)}},{key:"componentWillUnmount",value:function(){window.addEventListener("DOMContentLoaded",this.initialize),v.oldEditor.remove("editor-".concat(this.props.clientId))}},{key:"componentDidUpdate",value:function(e){var t=this.props,o=t.clientId,r=t.isSelected,n=t.attributes.content,c=window.tinymce.get("editor-".concat(o));e.attributes.content!==n&&this.content!==n&&c.setContent(n||""),!r&&c.initialized&&c.fire("blur",{wpBlockDidUpdate:!0})}},{key:"initialize",value:function(){var e=this.props,t=e.clientId,o=e.setAttributes,r=window.wpEditorL10n.tinymce.settings;v.oldEditor.initialize("editor-".concat(t),{tinymce:n()({},r,{inline:!0,content_css:!1,fixed_toolbar_container:"#toolbar-".concat(t),setup:this.onSetup})}),o({id:t})}},{key:"onSetup",value:function(e){var t,o=this,r=this.props,n=r.attributes.content,c=r.setAttributes;this.ref;this.editor=e,n&&e.on("loadContent",function(){return e.setContent(n)}),e.on("blur",function(r){if(!r.wpBlockDidUpdate){t=e.selection.getBookmark(2,!0),o.content=e.getContent();var n=o.props.isSelected;return c({content:o.content}),e.once("focus",function(){t&&e.selection.moveToBookmark(t)}),!n&&void 0}}),e.on("mousedown touchstart",function(){t=null}),e.on("keydown",function(t){t.keyCode!==x&&t.keyCode!==S||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(o.props.onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===O&&t.stopPropagation()}),e.on("init",function(){var e=o.editor.getBody();document.activeElement===e&&(e.blur(),o.editor.focus())})}},{key:"focus",value:function(){this.editor&&this.editor.focus()}},{key:"onToolbarKeyDown",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},{key:"render",value:function(){var e=this,t=this.props,o=t.clientId;t.name;return[k("div",{key:"toolbar",id:"toolbar-".concat(o),ref:function(t){return e.ref=t},className:"block-library-classic__toolbar tma-classic-paragraph__toolbar",onClick:this.focus,"data-placeholder":_.classicParagraphTitle,onKeyDown:this.onToolbarKeyDown}),k("div",{key:"editor",id:"editor-".concat(o),className:"wp-block-freeform block-library-rich-text__tinymce tma-classic-paragraph"})]}}]),t}(g),B=wp.element,E=B.RawHTML,j=B.createElement;var C,M=wp.richText,T=M.join,D=(M.split,M.create),L=M.toHTMLString,z=wp.blocks,N=z.createBlock,I=z.getBlockContent,R={from:(C=[],["core-embed/twitter","core-embed/youtube","core-embed/facebook","core-embed/instagram","core-embed/wordpress","core-embed/soundcloud","core-embed/spotify","core-embed/flickr","core-embed/vimeo","core-embed/animoto","core-embed/cloudup","core-embed/collegehumor","core-embed/crowdsignal","core-embed/dailymotion","core-embed/hulu","core-embed/imgur","core-embed/issuu","core-embed/kickstarter","core-embed/meetup-com","core-embed/mixcloud","core-embed/polldaddy","core-embed/reddit","core-embed/reverbnation","core-embed/screencast","core-embed/scribd","core-embed/slideshare","core-embed/smugmug","core-embed/speaker","core-embed/speaker-deck","core-embed/ted","core-embed/tumblr","core-embed/videopress","core-embed/wordpress-tv","core-embed/amazon-kindle"].forEach(function(e){C.push({type:"block",blocks:[e],transform:function(t){if(!t.url)return N("tadv/classic-paragraph",{content:""});var o,r=I(N(e,t)),n="<p>"+t.url+"</p>";return r&&r.indexOf("</figcaption>")>-1&&r.replace(/<figcaption[^>]*>([\s\S]*?)<\/figcaption>/,function(e,t){o=t}),N("tadv/classic-paragraph",{content:n+=o?"<p>"+o+"</p>":'<p><br data-mce-bogus="1"></p>'})}})}),["core/paragraph","core/image","core/heading","core/gallery","core/list","core/quote","core/code","core/columns","core/freeform","core/html","core/media-text","core/missing","core/preformatted","core/pullquote","core/subhead","core/table","core/text-columns","core/verse"].forEach(function(e){C.push({type:"block",blocks:[e],transform:function(t){var o=I(N(e,t));return(!o||o.indexOf("</div>")>-1)&&(o+='<p><br data-mce-bogus="1"></p>'),N("tadv/classic-paragraph",{content:o})}})}),C.push({type:"raw",priority:21,isMatch:function(){return!0}},{type:"block",isMultiBlock:!0,blocks:["core/paragraph"],transform:function(e){var t=L({value:T(e.map(function(e){var t=e.content;return D({html:t})}),"\u2028"),multilineTag:"p"});return N("tadv/classic-paragraph",{content:t})}},{type:"block",isMultiBlock:!0,blocks:["tadv/classic-paragraph"],transform:function(e){var t=L({value:T(e.map(function(e){var t=e.content;return D({html:t})}),"\u2028")});return N("tadv/classic-paragraph",{content:t})}},{type:"block",isMultiBlock:!0,blocks:["core/freeform"],transform:function(e){var t=L({value:T(e.map(function(e){var t=e.content;return D({html:t})}),"\u2028")});return N("tadv/classic-paragraph",{content:t})}}),C),to:[{type:"block",blocks:["core/freeform"],transform:function(e){return N("core/freeform",e)}},{type:"block",blocks:["core/html"],transform:function(e){return N("core/html",e)}}]},K="tadv/classic-paragraph",U="common",A={content:{type:"string",source:"html"}},H=wp.i18n.__,q=window.tadvBlockRegister,F={name:K,attributes:A,category:U,title:q.classicParagraphTitle,description:q.description,keywords:[H("text")],icon:"welcome-widgets-menus",supports:{className:!1,customClassName:!1,reusable:!0},merge:function(e,t){return{content:(e.content||"")+(t.content||"")}},transforms:R,edit:P,save:function(e){var t=e.attributes.content;return j(E,null,t)}},W=wp.data,$=W.dispatch,G=W.select,J=wp.blocks,Q=J.createBlock,V=J.rawHandler,X=function(){var e,t=G("core/block-editor").getSelectedBlock();if(t){var o=t.attributes.content;o?(/<p data-tadv-p="keep">/.test(o)&&(o=o.replace(/<p data-tadv-p="keep">/g,"<p>")),e=V({HTML:o})):e=Q("core/paragraph"),$("core/block-editor").replaceBlocks(t.clientId,e)}};!function(){var e=window.wp,t=window.tadvBlockRegister;if(e&&t){var o=e.element.createElement,r=e.i18n.__,n=(e.hooks.addFilter,e.editPost.PluginBlockSettingsMenuItem),c=e.plugins.registerPlugin,i=e.blocks,a=i.registerBlockType,l=i.setDefaultBlockName;t.classicParagraph?(a("tadv/classic-paragraph",F),c("tadv-add-submenu",{render:function(){return t.hybridMode&&l("tadv/classic-paragraph"),o(n,{allowedBlocks:["tadv/classic-paragraph"],icon:"screenoptions",label:r("Convert to Blocks"),onClick:X,small:null,role:"menuitem"})}})):t.hybridMode&&c("tadv-set-default-block",{render:function(){return l("core/freeform"),null}})}}()}]);