this.wp=this.wp||{},this.wp.editWidgets=function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=222)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},10:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return c})},11:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},12:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},13:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(31),c=n(5);function i(e,t){return!t||"object"!==Object(r.a)(t)&&"function"!=typeof t?Object(c.a)(e):t}},14:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",function(){return c})},15:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},2:function(e,t){!function(){e.exports=this.lodash}()},20:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}n.d(t,"a",function(){return r})},21:function(e,t){!function(){e.exports=this.regeneratorRuntime}()},222:function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"setupWidgetAreas",function(){return E}),n.d(r,"updateBlocksInWidgetArea",function(){return k}),n.d(r,"saveWidgetAreas",function(){return S});var c={};n.d(c,"getWidgetAreas",function(){return A}),n.d(c,"getWidgetArea",function(){return x}),n.d(c,"getBlocksFromWidgetArea",function(){return B});var i=n(0),o=(n(83),n(69)),a=n(25),u=n(60);Object(a.addFilter)("editor.MediaUpload","core/edit-widgets/replace-media-upload",function(){return u.MediaUpload});var s=n(4),l=n(30),d=n(11),f=n(7),b=n(2);var p=Object(s.combineReducers)({widgetAreas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SETUP_WIDGET_AREAS":return Object(b.mapValues)(Object(b.keyBy)(t.widgetAreas,"id"),function(e){return Object(b.pick)(e,["name","id","description"])})}return e},widgetAreaBlocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SETUP_WIDGET_AREAS":return Object(b.mapValues)(Object(b.keyBy)(t.widgetAreas,"id"),function(e){return e.blocks});case"UPDATE_BLOCKS_IN_WIDGET_AREA":return(e[t.widgetAreaId]||[])===t.blocks?e:Object(f.a)({},e,Object(d.a)({},t.widgetAreaId,t.blocks))}return e}}),O=n(21),g=n.n(O),m=n(20),j=n(9),v=n(1),w=g.a.mark(E),y=g.a.mark(S),h="WIDGET_AREAS_SAVE_NOTICE_ID";function E(){var e;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.select)("core","getEntityRecords","root","widgetArea");case 2:return e=t.sent,t.next=5,{type:"SETUP_WIDGET_AREAS",widgetAreas:Object(b.map)(e,function(e){var t=e.content,n=Object(m.a)(e,["content"]);return Object(f.a)({},n,{blocks:Object(j.parse)(Object(b.get)(t,["raw"],""))})})};case 5:case"end":return t.stop()}},w)}function k(e){return{type:"UPDATE_BLOCKS_IN_WIDGET_AREA",widgetAreaId:e,blocks:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}function S(){var e,t,n,r,c,i,o,a,u;return g.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.select)("core/edit-widgets","getWidgetAreas");case 2:e=s.sent,t=!0,n=!1,r=void 0,s.prev=6,c=e[Symbol.iterator]();case 8:if(t=(i=c.next()).done){s.next=19;break}return o=i.value,a=o.id,s.next=13,Object(l.select)("core/edit-widgets","getBlocksFromWidgetArea",a);case 13:return u=s.sent,s.next=16,Object(l.dispatch)("core","saveWidgetArea",{id:a,content:Object(j.serialize)(u)});case 16:t=!0,s.next=8;break;case 19:s.next=25;break;case 21:s.prev=21,s.t0=s.catch(6),n=!0,r=s.t0;case 25:s.prev=25,s.prev=26,t||null==c.return||c.return();case 28:if(s.prev=28,!n){s.next=31;break}throw r;case 31:return s.finish(28);case 32:return s.finish(25);case 33:return s.next=35,Object(l.dispatch)("core/notices","createSuccessNotice",Object(v.__)("Block areas saved succesfully."),{id:h,type:"snackbar"});case 35:case"end":return s.stop()}},y,null,[[6,21,25,33],[26,,28,32]])}var _=n(33),A=Object(_.a)(function(e){return Object(b.toArray)(e.widgetAreas)},function(e){return[e.widgetAreas]});function x(e,t){return e.widgetAreas[t]}function B(e,t){return e.widgetAreaBlocks[t]}var W=Object(s.registerStore)("core/edit-widgets",{reducer:p,actions:r,selectors:c,controls:l.controls});W.dispatch({type:"INIT"});var I=n(8),P=n(3),D=Object(P.createSlotFill)("EditWidgetsInserter"),T=D.Fill,N=D.Slot,M=T;M.Slot=function(){return Object(i.createElement)(N,{bubblesVirtually:!0})};var U=M,z=n(42),R=n(23);var F=function(){var e=Object(i.useState)(!1),t=Object(R.a)(e,2),n=t[0],r=t[1],c=Object(s.useDispatch)("core/edit-widgets").saveWidgetAreas,o=Object(i.useCallback)(Object(z.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,c();case 3:r(!1);case 4:case"end":return e.stop()}},e)})),[]);return Object(i.createElement)(P.Button,{isPrimary:!0,isLarge:!0,isBusy:n,"aria-disabled":n,onClick:n?void 0:o},Object(v.__)("Update"))};var C=function(){return Object(i.createElement)("div",{className:"edit-widgets-header",role:"region","aria-label":Object(v.__)("Widgets screen top bar"),tabIndex:"-1"},Object(i.createElement)(P.NavigableMenu,null,Object(i.createElement)(U.Slot,null)),Object(i.createElement)("h1",{className:"edit-widgets-header__title"},Object(v.__)("Block Areas")," ",Object(v.__)("(experimental)")),Object(i.createElement)("div",{className:"edit-widgets-header__actions"},Object(i.createElement)(F,null)))},L=Object(P.createSlotFill)("EditWidgetsBlockSidebar"),G=L.Fill,V=L.Slot;function q(){return Object(i.createElement)("div",{className:"edit-widgets-sidebar",role:"region","aria-label":Object(v.__)("Widgets advanced settings"),tabIndex:"-1"},Object(i.createElement)(P.Panel,{header:Object(v.__)("Block Areas")},Object(i.createElement)(V,{bubblesVirtually:!0})))}q.Inspector=G;var H=q,K=n(6),J=n(12),Q=n(10),X=n(13),Y=n(15),Z=n(14),$=function(e){function t(){return Object(J.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Q.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.hasSelectedBlock,r=t.onBlockSelected,c=t.isSelectedArea,i=t.clearSelectedBlock;n&&!e.hasSelectedBlock&&r(),!c&&e.isSelectedArea&&i()}},{key:"render",value:function(){return null}}]),t}(i.Component),ee=Object(I.compose)([Object(s.withSelect)(function(e){return{hasSelectedBlock:(0,e("core/block-editor").hasSelectedBlock)()}}),Object(s.withDispatch)(function(e){return{clearSelectedBlock:e("core/block-editor").clearSelectedBlock}})])($);var te=Object(I.compose)([Object(s.withSelect)(function(e,t){var n=t.id,r=e("core/edit-widgets"),c=r.getBlocksFromWidgetArea,i=r.getWidgetArea,o=e("core").canUser;return{blocks:c(n),widgetAreaName:(i(n)||{}).name,hasUploadPermissions:Object(b.defaultTo)(o("create","media"),!0)}}),Object(s.withDispatch)(function(e,t){var n=t.id;return{updateBlocks:function(t){(0,e("core/edit-widgets").updateBlocksInWidgetArea)(n,t)}}})])(function(e){var t=e.blockEditorSettings,n=e.blocks,r=e.hasUploadPermissions,c=e.initialOpen,o=e.isSelectedArea,a=e.onBlockSelected,s=e.updateBlocks,l=e.widgetAreaName,d=Object(i.useMemo)(function(){return function(e,t){return t?Object(f.a)({},e,{__experimentalMediaUpload:function(t){var n=t.onError,r=Object(m.a)(t,["onError"]);Object(u.uploadMedia)(Object(f.a)({wpAllowedMimeTypes:e.allowedMimeTypes,onError:function(e){var t=e.message;return n(t)}},r))}}):e}(t,r)},[t,r]);return Object(i.createElement)(P.Panel,{className:"edit-widgets-widget-area"},Object(i.createElement)(P.PanelBody,{title:l,initialOpen:c},Object(i.createElement)(K.BlockEditorProvider,{value:n,onInput:s,onChange:s,settings:d},o&&Object(i.createElement)(i.Fragment,null,Object(i.createElement)(U,null,Object(i.createElement)(K.Inserter,null)),Object(i.createElement)(K.BlockEditorKeyboardShortcuts,null)),Object(i.createElement)(ee,{isSelectedArea:o,onBlockSelected:a}),Object(i.createElement)(H.Inspector,null,Object(i.createElement)(K.BlockInspector,{showNoBlockSelectedMessage:!1})),Object(i.createElement)(K.WritingFlow,null,Object(i.createElement)(K.ObserveTyping,null,Object(i.createElement)(K.BlockList,{className:"edit-widgets-main-block-list"}))))))});var ne=Object(I.compose)([Object(s.withSelect)(function(e){return{areas:(0,e("core/edit-widgets").getWidgetAreas)()}})])(function(e){var t=e.areas,n=e.blockEditorSettings,r=Object(i.useState)(0),c=Object(R.a)(r,2),o=c[0],a=c[1],u=Object(i.useMemo)(function(){return t.map(function(e,t){return function(){a(t)}})},[t,a]);return t.map(function(e,t){var r=e.id;return Object(i.createElement)(te,{isSelectedArea:t===o,onBlockSelected:u[t],blockEditorSettings:n,key:r,id:r,initialOpen:0===t})})});var re=function(){var e=Object(s.useSelect)(function(e){return{notices:e("core/notices").getNotices()}}).notices,t=Object(b.filter)(e,{type:"snackbar"}),n=Object(s.useDispatch)("core/notices").removeNotice;return Object(i.createElement)(P.SnackbarList,{notices:t,className:"edit-widgets-notices__snackbar",onRemove:n})};var ce=Object(P.navigateRegions)(function(e){var t=e.blockEditorSettings;return Object(i.createElement)(P.SlotFillProvider,null,Object(i.createElement)(C,null),Object(i.createElement)(H,null),Object(i.createElement)(re,null),Object(i.createElement)("div",{className:"edit-widgets-layout__content",role:"region","aria-label":Object(v.__)("Widgets screen content"),tabIndex:"-1"},Object(i.createElement)(ne,{blockEditorSettings:t})),Object(i.createElement)(P.Popover.Slot,null))});var ie=Object(I.compose)([Object(s.withDispatch)(function(e){return{setupWidgetAreas:e("core/edit-widgets").setupWidgetAreas}})])(function(e){var t=e.setupWidgetAreas,n=e.settings;return Object(i.useEffect)(function(){t()},[]),Object(i.createElement)(ce,{blockEditorSettings:n})}),oe=function(){var e=window.wp.data.select("core/edit-widgets"),t=e.getWidgetAreas,n=e.getBlocksFromWidgetArea;return t().reduce(function(e,t){var r=t.id;return e[r]=n(r),e},{})},ae=Object(b.throttle)(function(e,t){var n=document.querySelector("#customize-preview > iframe");if(n&&n.contentDocument){var r=n.contentDocument.querySelector('[data-customize-partial-placement-context*=\'"sidebar_id":"'.concat(e,"\"']"));r&&(r.innerHTML=Object(j.serialize)(t),r.parentElement.innerHTML=r.outerHTML)}},1e3),ue=Object(b.throttle)(function(e){var t=document.getElementById("_customize-input-gutenberg_widget_blocks");t&&(t.value=JSON.stringify(Object.keys(e).reduce(function(t,n){return t[n]=Object(j.serialize)(e[n]),t},{})),t.dispatchEvent(new window.Event("change")))},1e3);if(window.wp&&window.wp.customize&&window.wp.data){var se=!1;window.wp.customize.bind("ready",function(){return window.wp.customize.previewer.bind("ready",function(){if(!se){var e;se=!0;try{e=JSON.parse(document.getElementById("_customize-input-gutenberg_widget_blocks").value),e=Object.keys(e).reduce(function(t,n){return t[n]=Object(j.parse)(e[n]),t},{})}catch(t){e={}}var t=window.wp.data.dispatch("core/edit-widgets"),n=t.setupWidgetAreas,r=t.updateBlocksInWidgetArea;n().then(function(){Object.keys(e).forEach(function(t){return r(t,e[t])}),e=oe(),window.wp.data.subscribe(function(){for(var t=oe(),n=!1,r=0,c=Object.keys(t);r<c.length;r++){var i=c[r];e[i]!==t[i]&&(ae(i,t[i]),n=!0)}n&&ue(t),e=t})})}})})}var le=Object(P.navigateRegions)(function(e){var t=e.settings;return Object(i.createElement)(P.SlotFillProvider,null,Object(i.createElement)("div",{className:"edit-widgets-customizer-edit-widgets-initializer__content",role:"region","aria-label":Object(v.__)("Widgets screen content"),tabIndex:"-1"},Object(i.createElement)(ne,{blockEditorSettings:t})),Object(i.createElement)(P.Popover.Slot,null))});function de(e,t){Object(o.registerCoreBlocks)(),Object(o.__experimentalRegisterExperimentalCoreBlocks)(t),Object(i.render)(Object(i.createElement)(ie,{settings:t}),document.getElementById(e))}function fe(e,t){Object(o.registerCoreBlocks)(),Object(i.render)(Object(i.createElement)(le,{settings:t}),document.getElementById(e))}n.d(t,"initialize",function(){return de}),n.d(t,"customizerInitialize",function(){return fe})},23:function(e,t,n){"use strict";var r=n(38);var c=n(37);function i(e,t){return Object(r.a)(e)||function(e,t){var n=[],r=!0,c=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){c=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(c)throw i}}return n}(e,t)||Object(c.a)()}n.d(t,"a",function(){return i})},25:function(e,t){!function(){e.exports=this.wp.hooks}()},3:function(e,t){!function(){e.exports=this.wp.components}()},30:function(e,t){!function(){e.exports=this.wp.dataControls}()},31:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}n.d(t,"a",function(){return c})},33:function(e,t,n){"use strict";var r,c;function i(e){return[e]}function o(e){return!!e&&"object"==typeof e}function a(){var e={clear:function(){e.head=null}};return e}function u(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}r={},c="undefined"!=typeof WeakMap,t.a=function(e,t){var n,s;function l(){n=c?new WeakMap:a()}function d(){var n,r,c,i,o,a=arguments.length;for(i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];for(o=t.apply(null,i),(n=s(o)).isUniqueByDependants||(n.lastDependants&&!u(o,n.lastDependants,0)&&n.clear(),n.lastDependants=o),r=n.head;r;){if(u(r.args,i,1))return r!==n.head&&(r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=n.head,r.prev=null,n.head.prev=r,n.head=r),r.val;r=r.next}return r={val:e.apply(null,i)},i[0]=null,r.args=i,n.head&&(n.head.prev=r,r.next=n.head),n.head=r,r.val}return t||(t=i),s=c?function(e){var t,c,i,u,s=n,l=!0;for(t=0;t<e.length;t++){if(!o(c=e[t])){l=!1;break}s.has(c)?s=s.get(c):(i=new WeakMap,s.set(c,i),s=i)}return s.has(r)||((u=a()).isUniqueByDependants=l,s.set(r,u)),s.get(r)}:function(){return n},d.getDependants=t,d.clear=l,l(),d}},37:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",function(){return r})},38:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",function(){return r})},4:function(e,t){!function(){e.exports=this.wp.data}()},42:function(e,t,n){"use strict";function r(e,t,n,r,c,i,o){try{var a=e[i](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(c,i){var o=e.apply(t,n);function a(e){r(o,c,i,a,u,"next",e)}function u(e){r(o,c,i,a,u,"throw",e)}a(void 0)})}}n.d(t,"a",function(){return c})},5:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},6:function(e,t){!function(){e.exports=this.wp.blockEditor}()},60:function(e,t){!function(){e.exports=this.wp.mediaUtils}()},69:function(e,t){!function(){e.exports=this.wp.blockLibrary}()},7:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(11);function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},c=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),c.forEach(function(t){Object(r.a)(e,t,n[t])})}return e}},8:function(e,t){!function(){e.exports=this.wp.compose}()},83:function(e,t){!function(){e.exports=this.wp.notices}()},9:function(e,t){!function(){e.exports=this.wp.blocks}()}});