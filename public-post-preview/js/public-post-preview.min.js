!function(e){DSPublicPostPreview={initialize:function(){var t=this;t.checkbox=e("#public-post-preview"),t.link=e("#public-post-preview-link"),t.nonce=e("#public_post_preview_wpnonce"),t.status=e("#public-post-preview-ajax"),t.status.css("opacity",0),t.checkbox.bind("change",function(){t.change()}),t.link.find("input").on("focus",function(){e(this).select()})},change:function(){var t=this,i=t.checkbox.prop("checked")?"true":"false";t.link.toggle(),t.checkbox.prop("disabled","disabled"),t.request({_ajax_nonce:t.nonce.val(),checked:i,post_ID:e("#post_ID").val()},function(e){e.success&&("true"===i?(t.status.text(DSPublicPostPreviewL10n.enabled),t._pulsate(t.status,"green")):(t.status.text(DSPublicPostPreviewL10n.disabled),t._pulsate(t.status,"red"))),t.checkbox.prop("disabled","")})},request:function(t,i){e.ajax({type:"POST",url:ajaxurl,data:e.extend(t,{action:"public-post-preview"}),success:i})},_pulsate:function(e,t){e.css("color",t).animate({opacity:1},600,"linear").animate({opacity:0},600,"linear",function(){e.empty()})}},e(DSPublicPostPreview.initialize())}(jQuery);